<?xml version="1.0" encoding="UTF-8"?><!-- 
	수정일				수정내용
  ========= 		=================================================
  2025.02.27		DART 정보
-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="StockDataDAO">

		<select id="selectStocksList"  parameterType="egovframework.stock.data.service.StocksDataVO" resultType="egovMap">
		<![CDATA[
		 SELECT * FROM ( SELECT rownum rn, TB.* FROM (
			SELECT /*selectStockList*/
				 A.STOCKS_CODE
				,A.STOCKS_NAME
				,A.STOCKS_GUBUN
				,A.HOMEPAGE
				,A.UPJONG
				,A.MAIN_PRDUCT
				,A.REG_DATE
			FROM STOCKS_LIST A
			WHERE 1=1
			]]>
			<if test="searchKeyword != null and searchKeyword != ''">
				<![CDATA[AND A.STOCKS_NAME LIKE '%'||#{searchKeyword}||'%']]>
			</if>
			<if test="gubun != null and gubun != ''">
				<![CDATA[AND A.STOCKS_GUBUN = #{gubun}]]>
			</if>
			<![CDATA[
			ORDER BY A.STOCKS_NAME
			  ) TB )  WHERE rn BETWEEN #{firstIndex} + 1 AND #{firstIndex} + #{recordCountPerPage}
			]]> 
	</select>
	
	<select id="selectStocksListTotCnt" parameterType="egovframework.stock.data.service.StocksDataVO" resultType="int">
		
		SELECT COUNT(A.STOCKS_CODE) AS "totcnt" FROM STOCKS_LIST A
		WHERE 1=1
		<if test="searchKeyword != null and searchKeyword != ''">
			<![CDATA[AND A.STOCKS_NAME LIKE '%'||#{searchKeyword}||'%']]>
		</if>
		<if test="gubun != null and gubun != ''">
			<![CDATA[AND A.STOCKS_GUBUN = #{gubun}]]>
		</if>
		
	</select>
	
	<!-- 종목 상세 조회 -->
	<select id="selectStocksDetail"  parameterType="egovframework.stock.data.service.StocksDataVO" resultType="egovMap">
		<![CDATA[
			SELECT /*selectStockList*/
				 A.STOCKS_CODE
				,A.STOCKS_NAME
				,A.STOCKS_GUBUN
				,A.HOMEPAGE
				,A.UPJONG
				,A.MAIN_PRDUCT
				,A.COUNTRY
				,A.REG_DATE
			FROM STOCKS_LIST A
			WHERE A.STOCKS_CODE = #{stocksCode}
			]]>
	</select>
	
</mapper>